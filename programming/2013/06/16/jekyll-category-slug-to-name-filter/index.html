<!doctype html><html lang="ja"><head><meta charset="utf-8"><title>[jekyll] 英語名カテゴリーを日本語表記に変換するフィルター - Creataa</title><meta name="author" content="kerotaa"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="Web x Design x Programming x Life"><link href="/assets/css/style.css" rel="stylesheet" media="all"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="apple-touch-icon" href="/images/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed"><link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed"> <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--></head><body class="single"><header id="site-header"><div class="container"><div class="site-hgroup"><h1 class="site-title"><a href="/">Creataa</a></h1><p class="site-description">Web x Design x Programming x Life</p></div><form class="site-search"  action="https://www.google.co.jp/search"> <input class="text"  name="q" placeholder="Keywords"><input class="submit" type="submit" value="search"> <input type="hidden" name="q" value="site:http://kerotaa.github.io"></form> <nav class="site-nav"><ul><li><a href="/archive.html">Archive</a></li><li><a href="/categories.html">Categories</a></li><li><a href="/pages.html">Pages</a></li><li><a href="/tags.html">Tags</a></li></ul> </nav><div class="site-toggle-menu"> <a href="#" title="Menu">menu</a></div><div class="site-return"> <a href="#content" title="Return to pagetop">arrowup</a></div></div> </header><div id="content"><div id="main"> <article class="post post-single"> <header class="post-header"><h1 class="post-title">[jekyll] 英語名カテゴリーを日本語表記に変換するフィルター</h1><ul class="post-meta"><li class="post-date"> <time datetime="2013-06-16T21:37:12+09:00">16 June, 2013</time></li><li class="post-category"><ul><li><a href="http://kerotaa.github.io/category/programming/" title="プログラミング">プログラミング</a></li></ul></li><li class="post-tag"><ul><li><a href="http://kerotaa.github.io/tag/jekyll/" title="jekyll">jekyll</a></li><li><a href="http://kerotaa.github.io/tag/Ruby/" title="Ruby">Ruby</a></li></ul></li></ul> </header><div class="post-body"><p>Github PagesではURLに日本語が含まれているとファイルにアクセスできない場合があるので、カテゴリーを日本語にすると悲劇が起きることがあります<span class="lsf">frustrate</span></p><p>そこで、フィルターで英語→日本語に変換して表示してやると解決できました。</p><h3>ソースコード</h3><h5><a href="https://gist.github.com/kerotaa/5791927">slug2name.rb</a></h5><div class="highlight"><pre><code class="ruby"><span class="k">module</span> <span class="nn">Jekyll</span>
    <span class="k">module</span> <span class="nn">Slug2Name</span>
        <span class="k">def</span> <span class="nf">slug2name</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
        <span class="n">slug</span> <span class="o">=</span> <span class="vi">@context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span><span class="o">[</span><span class="s1">'category_slugs'</span><span class="o">][</span><span class="n">input</span><span class="o">]</span>
        <span class="n">slug</span> <span class="p">?</span> <span class="n">slug</span> <span class="p">:</span> <span class="n">input</span>
    <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span>
<span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Template</span><span class="o">.</span><span class="n">register_filter</span><span class="p">(</span><span class="ss">Jekyll</span><span class="p">:</span><span class="ss">:Slug2Name</span><span class="p">)</span>
</code></pre></div><h5>_config.yml</h5><div class="highlight"><pre><code class="ruby"><span class="n">category_slugs</span><span class="p">:</span>
    <span class="ss">programming</span><span class="p">:</span> <span class="s2">"プログラミング"</span>
    <span class="ss">diary</span><span class="p">:</span> <span class="s2">"日記"</span>
</code></pre></div><h5>Example</h5><div class="highlight"><pre><code class="html"><span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/category/{{ category }}/"</span><span class="nt">&gt;</span>{{ category | slug2name }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</code></pre></div></div> <footer class="post-footer"><div id="disqus_thread"></div> <script>var disqus_developer=1,disqus_shortname="creataa";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a><nav class="pagination"><ul><li class="prev"><a href="/programming/2013/06/16/jekyll-remove-empty-lines-html/" title="[jekyll] 生成されるHTMLから空行を取り除くプラグイン">← Previous</a></li><li class="next"><a href="/programming/2013/06/16/jekyll-md-code-block-highlight-tag/" title="[jekyll] Markdownのコードブロックをhighlightタグに変換するプラグイン">Next →</a></li></ul> </nav> </footer> </article></div><div id="side"><div class="container"><div class="side-module side-module-recent-entries"><h3 class="side-module-title">Recently Entries</h3><div class="side-module-body"><ol><li><a href="http://kerotaa.github.io/programming/2013/06/18/jekyll-newpost-applescript/" title="[jekyll] AppleScriptで新規投稿を楽にしてみた">[jekyll] AppleScriptで新規投稿を楽にしてみた</a></li><li><a href="http://kerotaa.github.io/programming/2013/06/16/jekyll-md-code-block-highlight-tag/" title="[jekyll] Markdownのコードブロックをhighlightタグに変換するプラグイン">[jekyll] Markdownのコードブロックをhighlightタグに変換するプラグイン</a></li><li><a href="http://kerotaa.github.io/programming/2013/06/16/jekyll-category-slug-to-name-filter/" title="[jekyll] 英語名カテゴリーを日本語表記に変換するフィルター">[jekyll] 英語名カテゴリーを日本語表記に変換するフィルター</a></li><li><a href="http://kerotaa.github.io/programming/2013/06/16/jekyll-remove-empty-lines-html/" title="[jekyll] 生成されるHTMLから空行を取り除くプラグイン">[jekyll] 生成されるHTMLから空行を取り除くプラグイン</a></li><li><a href="http://kerotaa.github.io/diary/2013/06/10/hello-world/" title="Hello, World">Hello, World</a></li></ol></div></div><div class="side-module side-module-tags"><h3 class="side-module-title">Tags</h3><div class="side-module-body"><ul><li><a href="/tag/jekyll/">jekyll</a></li><li><a href="/tag/Ruby/">Ruby</a></li><li><a href="/tag/AppleScript/">AppleScript</a></li><li><a href="/tag/Mac/">Mac</a></li></ul></div></div><div class="side-module side-module-categories"><h3 class="side-module-title">Categories</h3><div class="side-module-body"><ul><li><a href="/category/diary/">雑記</a><span class="count">(1)</span></li><li><a href="/category/programming/">プログラミング</a><span class="count">(4)</span></li></ul></div></div><div class="side-module side-module-archives"><h3 class="side-module-title">Archives</h3><div class="side-module-body"><ul><li><a href="/archives/2013/06/">2013-06</a><span class="count">(5)</span></li></ul></div></div></div></div></div><footer id="site-footer"><div class="container"><div class="foot-modules"><div class="foot-module foot-module-profile"><h3 class="foot-module-title">About</h3><div class="foot-module-body"><div class="author"><p class="icon"><img src="/images/author.png" width="64" height="64" alt="kerotaa"></p><p class="intro"> <span class="name">kerotaa</span> 素人趣味でWebデザインやプログラミングを楽しんでいます。</p></div></div></div><div class="foot-module foot-module-connect"><h3 class="foot-module-title">Connect</h3><div class="foot-module-body"><ul class="sns"><li class="twitter"><a href="https://twitter.com/kerotaa" title="Twitter">Twitter</a></li><li class="github"><a href="https://github.com/kerotaa/" title="Github">Github</a></li><li class="youtube"><a href="http://www.youtube.com/channel/UC84Gyeg37bKIGxHjY3aXGOw" title="Youtube">Youtube</a></li><li class="pinterest"><a href="http://pinterest.com/kerotaa/" title="Pinterest">Pinterest</a></li></ul><ul class="sns"><li class="feed"><a href="/atom.xml" title="Feed">Feed</a></li></ul></div></div><div class="foot-module foot-module-copyright"><h3 class="foot-module-title">Timeline</h3><div class="foot-module-body"> <a class="twitter-timeline" href="https://twitter.com/kerotaa" data-widget-id="345227121217646593" data-chrome="noscrollbar noheader nofooter noborders transparent" data-link-color="#FF6B6B">@kerotaa からのツイート</a> <script>!function(t,e,r){var n,s=t.getElementsByTagName(e)[0],i=/^http:/.test(t.location)?"http":"https";t.getElementById(r)||(n=t.createElement(e),n.id=r,n.src=i+"://platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s))}(document,"script","twitter-wjs")</script></div></div></div><div class="copyright">© 2013 kerotaa. Generated by jekyll.</div></div> </footer><script src="/assets/js/throttle.js"></script><script src="/assets/js/blog.min.js" async defer></script></body></html>